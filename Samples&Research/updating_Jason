//Inorder to enable the update feaure of the programme I decided to use the remove file capabiity in ballerina,
as I have been unable to find a command to enable one to directly modify a json file. For now this is the alternative...further research needed

import ballerina/io;
import ballerina/file;
import ballerina/log;

function write(json content, string path) returns @tainted error? {

    io:WritableByteChannel wbc = check io:openWritableFile(path);
    io:WritableCharacterChannel wch = new (wbc, "UTF8");
    var result = wch.writeJson(content);
   
    return result;
}

public function main() {

     //Allows one to enter the name of the jason file
    string path = io:readln("Enter record name: ");

    //file path in which to save the information
    string filePath = "./src/"+path+".json";

    //tests if the file exists
   boolean fileExists = file:exists(<@untained>  filePath);

   if (fileExists == true){

       io:println("File already exists!");

       string answer = io:readln("Do you want to update the contents ?: ");
       boolean choice = answer.equalsIgnoreCaseAscii("yes");
       
       if(choice == true){

       //Remove existing file
        error? removeFile= file:remove(<@untained>  filePath);   

        //Write modified file        
            json j2 = {
                "Store": {
                    "@id": "A",
                    "name": "MA",
                    "address": {
                        "street": "Main",
                        "city": "94"
                        },
                    "codes": ["4", "8"]
                 }
    };

        //Writing the chosen information to the required json file
        var wResult = write(j2, <@untained>  filePath);
        if (wResult is error) {
            log:printError("Error occurred while writing json: ", wResult);
        } else {
        
            }
        }   

    else {
        io:println("No changes made!");
         }
    
   }

   else {

       //sample of the record that can be saved
    json j2 = {
        "Store": {
            "@id": "Sample1",
            "name": "Sample2",
            "address": {
                "street": "Main",
                "city": "94"
            },
            "codes": ["4", "8"]
        }
    };
    io:println("Preparing to write json file");

    //Writing the chosen information to the required json file
    var wResult = write(j2, <@untained>  filePath);
    if (wResult is error) {
        log:printError("Error occurred while writing json: ", wResult);
    } else {
        
    }

   }

    
}
